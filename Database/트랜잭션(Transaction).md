## 트랜잭션이란?

- 데이터베이스의 상태를 변화시키기 위해 수행하는 작업 단위
    - 데이터베이스의 상태를 변화시킨다는 것
    = SELECT, INSERT, DELETE, UPDATE의 질의어를 이용하여 데이터베이스에 접근하는 것
    - 작업 단위
    = 많은 질의어 명령문들을 사람이 정하는 기준에 따라 정해짐
    (ex. 게시판에서 게시글 작성 시, 게시글 등록 후 게시판에 돌아오면 작성한 글이 포함된 업데이트된 게시판 볼 수 있음
    ⇒  사용자가 올리기 버튼을 누르면 Insert문을 사용하여 사용자가 입력한 게시글의 데이터를 옮김. 게시판을 구성할 데이터를 Select하여 최신정보로 유지. (작업단위: insert + select = 하나의 트랜잭션)
    ⇒ 이때 insert와 select가 모두 성공적으로 완료되어야만 하나의 트랜잭션이 완료되는 것(commit)
    ⇒ 둘 중에 하나라도 실패하면 모든 쿼리문을 취소하고 이전 상태로 돌려놔야함(rollback)
    - 트랙잭션을 잘 구성하는 것이 데이터를 다룰 때 많은 이점을 가져다줌
- DBMS의 성능: 얼마나 transaction이 잘 일어나냐(얼마나 많은 transaction을 처리할 수 있냐...)

## Commit

- 하나의 트랜잭션이 성공적으로 끝났고 DB가 일관성있는 상태일 때 알려주기 위해 사용하는 연산
- 이 연산을 사용하면 수행했던 트랜잭션이 로그에 저장되며 후에 Rollback 연산을 수행했었던 트랜잭션 단위로 하는 것을 도와줌

## Rollback

하나의 트랜잭션이 비정상적으로 종료된 경우(트랜잭션의 원자성이 깨진 경우) last consistent state(ex. 트랜잭션 시작 상태)로 roll back 할 수 있음

## 특성

- ACID: DB Transaction이 안전하게 수행된다는 것을 보장하기 위한 성질을 가리키는 약어

### Atomicity(원자성)

- All or Nothing. 아예 다 잘 처리하거나 아예 안하거나.... 부분적으로 실행되거나 중단되지 않는 것을 보장(완벽하게 못하면 아예 하지마라~~~)
- 모두가 완벽히 수행되지 않고 어느 하나라도 오류가 발생하면 트랜잭션 전부가 취소되어야함
- 중간에 문제가 생기면 롤백함(이전 상태로 돌아감)

### Consistency(일관성)

- 성공적으로 완료되면 일관적인 DB 상태를 유지하는 것
- 정해진 규칙에 의해서만 수정이 가능한 특성(ex. diaryTitle:  string만, optional은 안되게 등등 일관적으로 데이터를 유지하는 것)

### Isolation(독립성, 격리성)

- 트랜스액션 수행 시 다른 트랜잭션의 작업이 끼어들지 못하도록 보장하는 것, 작업간의 분리를 보장함
- 얼마만큼 보장하지 못할지 설정할 수 있(ex. 3개 테이블 중 하나 수정할때 나머지 두개는 허용해줄지 아니면 아무것도 수정못하게 할지..., lock에 대한 설정. 테이블에 대한 lock을 설정할 수도 있고 특정 column에 대한 lock을 설정할 수도 있음 등등)
- 수행 중인 트랜잭션은 완전히 완료될 때 까지 다른 트랜잭션에서 수행 결과를 참조할 수 없음

### Durability(영속성, 지속성)

한 번 수행된 트랜잭션의 결과는 영구적으로 반영됨