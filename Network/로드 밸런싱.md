## **로드 밸런싱(Load Balancing)**

- 서버에 가해지는 부하(=로드)를 분산(=밸런싱)해주는 장치나 기술
- 둘 이상의 CPU or 저장장치와 같은 컴퓨터 자원들에게 작업을 나누는 것

[https://camo.githubusercontent.com/d9e1a3f5265ee3edf37f141e76016d77720fc7003f90d46287d6954bb24eba33/68747470733a2f2f7777772e6564756361746976652e696f2f6170692f636f6c6c656374696f6e2f353636383633393130313431393532302f353634393035303232353334343531322f706167652f353734373937363230373037333238302f696d6167652f353639363435393134383039393538342e706e67](https://camo.githubusercontent.com/d9e1a3f5265ee3edf37f141e76016d77720fc7003f90d46287d6954bb24eba33/68747470733a2f2f7777772e6564756361746976652e696f2f6170692f636f6c6c656374696f6e2f353636383633393130313431393532302f353634393035303232353334343531322f706167652f353734373937363230373037333238302f696d6167652f353639363435393134383039393538342e706e67)

### 로드밸런싱이 필요한 이유

- 요즘 시대에는 웹사이트에 접속하는 인원이 급격히 늘어나게 되었다.
- 따라서 이 사람들에 대해 모든 트래픽을 감당하기엔 1대의 서버로는 부족하다. 대응 방안으로 **하드웨어의 성능을 올리거나**(`Scale-up`)
- 여러대의 서버가 **나눠서 일하도록 만드는 것(`Scale-out`)**이 있다.
- 하드웨어 향상 비용이 더욱 비싸기도 하고, 서버가 여러대면 무중단 서비스를 제공하는 환경 구성이 용이하므로 Scale-out이 효과적이다.
- 이때 여러 서버에게 균등하게 트래픽을 분산시켜주는 것이 바로 **로드 밸런싱**이다.

### 로드밸런싱의 종류

👉 **Scale-up과 Scale-out**

![https://post-phinf.pstatic.net/MjAxOTEyMTBfMjk1/MDAxNTc1OTU1MDI2NTY4.Zxj8nWGb6G6jtHDAZPPDf-dPZnpb_hsd7ydWw5lW7vAg.AucOXPJnmLyGiHr8KpVD9Dsy59FsWv5p7qJnSyW_YFAg.JPEG/%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%8B%B1_%EC%8A%A4%EC%BC%80%EC%9D%BC.jpg?type=w1200](https://post-phinf.pstatic.net/MjAxOTEyMTBfMjk1/MDAxNTc1OTU1MDI2NTY4.Zxj8nWGb6G6jtHDAZPPDf-dPZnpb_hsd7ydWw5lW7vAg.AucOXPJnmLyGiHr8KpVD9Dsy59FsWv5p7qJnSyW_YFAg.JPEG/%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%8B%B1_%EC%8A%A4%EC%BC%80%EC%9D%BC.jpg?type=w1200)

- **Scale-up은** 서버 자체의 성능을 확장하는 것
    - ex. CPU가 i3인 컴퓨터를 i7으로 업그레이드하는 것
- **Scale-out은** 기존 서버와 동일하거나 낮은 성능의 서버를 두 대 이상 증설하여 운영하는 것
    - ex. CPU가 i3인 컴퓨터를 여러 대 추가 구입해 운영하는 것

**Scale-out**의 방식으로 서버를 증설한다면 여러 대의 서버로 트래픽을 균등하게 분산해주는 **로드밸런싱**이 반드시 필요함

클라이언트의 요청을 특정 서버에 분배하는 로드밸런싱 기법은 여러 가지가 있음

### **로드 밸런서가 서버를 선택하는 방식**

- 라운드 로빈(Round Robin)
    - 서버에 들어온 요청을 순서대로 돌아가며 배정하는 방식
    - 클라이언트의 요청을 순서대로 분배하기 때문에 여러 대의 서버가 동일한 스펙을 갖고 있고, 서버와의 연결(세션)이 오래 지속되지 않는 경우에 활용하기 적합함
- Least Connections (최소 연결 방식)
    - 요청이 들어온 시점에 연결 개수가 가장 적은 서버에 우선적으로 트래픽을 배분
    - 세션이 자주 길어지거나, 서버에 분배된 트래픽들이 일정하지 않은 경우에 적합함
- **IP 해시 방식(IP Hash Method)**
    - 클라이언트의 IP 주소를 특정 서버로 매핑하여 요청을 처리하는 방식
    - 사용자의 IP를 해싱해서 로드를 분배하기 때문에 사용자가 항상 동일한 서버로 연결되는 것을 보장함

