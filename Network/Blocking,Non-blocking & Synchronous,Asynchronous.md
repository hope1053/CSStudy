## **블록과 넌블록 & 동기와 비동기**

`제어권`이 누구한테 있냐 & 호출한 애가 호출된 애의 상태를 신경쓰느냐 안쓰느냐

⇒ **Blocking이 곧 Synchronous와 같고 Non-blocking이 곧 Asynchronous와 같은 개념으로 잘못 이해할 수 있음**

![1](https://user-images.githubusercontent.com/71035113/156918730-3ccfa74e-ece0-4666-94e5-dae8a16c4d7f.jpg)

## **Blocking/Non-blocking**

블럭/논블럭은 간단히 말해서 `호출된 함수`가 `호출한 함수`에게 ***제어권을 건네주는 유무의 차이***

함수 A, B가 있고, A 안에서 B를 호출했다고 가정해보자. 이때 호출한 함수는 A고, 호출된 함수는 B가 된다. 현재 B가 호출되면서 B는 자신의 일을 진행해야 한다. (제어권이 B에게 주어진 상황)

- **Blocking**  : `호출된 함수`가 자신이 할 일을 모두 마칠 때까지 제어권을 계속 가지고서 `호출한 함수`에게 바로 돌려주지 않는 경우
    - ex. 함수 B는 내 할 일을 다 마칠 때까지 제어권을 가지고 있는다. A는 B가 다 마칠 때까지 기다려야 한다.
- **Non-blocking** : `호출된 함수`가 자신이 할 일을 채 마치지 않았더라도 바로 제어권을 건네주어(return) `호출한 함수`가 다른 일을 진행할 수 있도록 해주는 것
    - ex. 함수 B는 할 일을 마치지 않았어도 A에게 제어권을 바로 넘겨준다. A는 B를 기다리면서도 다른 일을 진행할 수 있다.

<aside>
💡 즉, 호출된 함수(B)에서 일을 시작할 때 바로 제어권을 리턴해주느냐, 할 일을 마치고 리턴해주느냐에 따라 블럭과 논블럭으로 나누어진다고 볼 수 있다.

</aside>

## **Synchronous/Asynchronous**

동기/비동기는 일을 수행 중인 `동시성`에 주목하자

아까처럼 함수 A와 B의 상황일 때, ***B의 수행 결과나 종료 상태를 A가 신경쓰고 있는 유무의 차이***

- **Synchronous** :  `호출된 함수`의 수행 결과 및 종료를 `호출한 함수`가 신경 쓰는 것
    - ex. 함수 A는 함수 B가 일을 하는 중에 기다리면서, 현재 상태가 어떤지 계속 체크한다.
- **Asynchronous** : `호출된 함수`의 수행 결과 및 종료를 `호출된 함수`
 혼자 직접 신경 쓰고 처리하는 것
    - ex. 함수 B의 수행 상태를 B 혼자 직접 신경쓰면서 처리한다.
    - **(Callback):** 비동기는 호출시 `Callback`을 전달하여 작업의 완료 여부를 호출한 함수에게 답하게 된다. (Callback이 오기 전까지 호출한 함수는 신경쓰지 않고 다른 일을 할 수 있음)

<aside>
💡 즉, 호출된 함수(B)를 호출한 함수(A)가 신경쓰는지, 호출된 함수(B) 스스로 신경쓰는지를 동기/비동기라고 생각하면 된다.

</aside>

![1](https://user-images.githubusercontent.com/71035113/156918730-3ccfa74e-ece0-4666-94e5-dae8a16c4d7f.jpg)

위 그림처럼 총 4가지의 경우가 나올 수 있다. 이걸 좀 더 이해하기 쉽게 Case 별로 예시를 통해 보면서 이해하고 넘어가보자

`상황 : 치킨집에 직접 치킨을 사러감`

### **1) Blocking & Synchronous**

: 제어권이 호출된 함수한테 있고 + 호출한 함수가 호출된 함수의 상태 신경 씀

```
나 : 사장님 치킨 한마리만 포장해주세요
사장님 : 네 금방되니까 잠시만요!
나 : 넹
-- 사장님 치킨 튀기는 중--
나 : (아 언제 되지?..궁금한데 그냥 멀뚱히 서서 치킨 튀기는거 보면서 기다림)
```

- 나→ 사장님 호출
- 제어권이 사장님한테 있음 ⇒ 나는 아무것도 못함
- 호출한 함수인 내가 호출한 상태 신경 씀

### **2) Blocking & Asynchronous**

: 제어권이 호출된 함수한테 있고 + 호출한 함수가 호출된 함수의 상태 신경 안 씀

```
나 : 사장님 치킨 한마리만 포장해주세요
사장님 : 네 금방되니까 잠시만요!
나 : 앗 넹
-- 사장님 치킨 튀기는 중--
나 : (언제 되는지 안 궁금함, 잠시만이래서 다 될때까지 서서 붙잡힌 상황)
```

- 나→ 사장님 호출
- 제어권이 사장님한테 있음 ⇒ 나는 아무것도 못함
- 호출한 함수인 내가 **호출한 상태 신경 안 씀**

### **3) Non-blocking & Synchronous**

: 제어권이 호출한 함수(나)한테 있고 + 호출한 함수가 호출된 함수의 상태 신경 씀

```
나 : 사장님 치킨 한마리만 포장해주세요
사장님 : 네~ 주문 밀려서 시간 좀 걸리니까 볼일 보시다 오세요
나 : 넹
-- 사장님 치킨 튀기는 중--
(5분뒤) 나 : 제꺼 나왔나요?
사장님 : 아직이요
(10분뒤) 나 : 제꺼 나왔나요?
사장님 : 아직이요ㅠ
(15분뒤) 나 : 제꺼 나왔나요?
사장님 : 아직이요ㅠㅠ

```

- 나→ 사장님 호출
- 제어권이 나한테 있음 ⇒ 마냥 기다리지 않고 내 볼일 볼 수 있음 (`Non-blocking`)
- 호출한 함수인 내가 **호출한 상태 신경 씀**

### **4) Non-blocking & Asynchronous**

: 제어권이 호출한 함수(나)한테 있고 + 호출한 함수가 호출된 함수의 상태 신경 안 씀

```
나 : 사장님 치킨 한마리만 포장해주세요
사장님 : 네~ 주문 밀려서 시간 좀 걸리니까 볼일 보시다 오세요
나 : 넹
-- 사장님 치킨 튀기는 중--
나 : (앉아서 다른 일 하는 중)
...
사장님 : 치킨 나왔습니다
나 : 잘먹겠습니다~
```

- 나→ 사장님 호출
- 제어권이 나한테 있음 ⇒ 마냥 기다리지 않고 내 볼일 볼 수 있음 (`Non-blocking`)
- 호출한 함수인 내가 **호출한 상태 신경 안 씀 ⇒ 사장님한테 치킨 나왔는지 상태 안 물어봄**

### **참고 사항**

- [링크](http://homoefficio.github.io/2017/02/19/Blocking-NonBlocking-Synchronous-Asynchronous/)
- [링크](https://musma.github.io/2019/04/17/blocking-and-synchronous.html)
