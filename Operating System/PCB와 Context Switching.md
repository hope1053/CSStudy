# PCB와 Context Switching

# PCB

- Process Control Block(프로세스는 현재 실행 중이거나 곧 실행 가능한 PCB를 가진 프로그램이다.)
- 운영체제가 프로세스를 제어하기 위해 정보를 저장해놓는 곳, 프로세스의 상태 정보를 저장하는 구조체
- 프로세스 상태 관리와 Context Switching을 위해 필요함

### 배경

- 인터넷하면서 음악듣고 채팅도 하고 이런 태스크를 동시에 처리함
- 사실은 동시에 처리되는게 아니라 Time Sharing이라는 방식으로 짧은 시간동안 프로세스를 왔다갔다 번갈아가면서 처리해주는건데 효율적이고 빠른 방식이라서 제대로 느끼지 못할뿐!
- 프로세스들이 이렇게 교체되면서 수행되고 나면 다시 다른 프로세스를 불러와야함
→ 이전 작업에 대한 내용을 기억하고 있다!
→ 프로세스 단위로 정보를 저장해주는 Block이 있는데 이게 PCB

---

- 운영체제도 하드웨어가 효율적으로 동작할 수 있도록 관리해주는 프로그램임
- 따라서 운영체제라는 프로그램이 프로세스를 하나 만들어서 실행을 하려면 그 프로세스와 관련된 데이터 구조가 당연히 있어야함.
- 그 프로세스가 뭔지 알아야함, 정말 기본적인 정보들은 어딘가에 저장이 되어 있어야 함
- 그것을 PCB라고 부르는 것. 즉 프로세스가 만들어지면 그 프로세스에 저장되어야 할 데이터들을 하나의 structure로 만들어 놓은 것을 뜻함. 이런 블럭들이 있어서 스위칭 되어도 기억을 하고 이어서 실행할 수 있어요.

### 상세 정보

- ------PCB에서 유지되는 정보----------
- PID : 프로세스의 고유 번호
- 상태 : 준비, 대기, 실행 등의 상태
- 포인터 : 다음 실행될 프로세스의 포인터
- Register save area : 레지스터 관련 정보
- Priority : 스케줄링 및 프로세스 우선순위
- 할당된 자원 정보
- Account : CPU 사용시간, 실제 사용된 시간
- 입출력 상태 정보
- ------------------------------------------

### PCB 관리

- Linked List 방식으로
- PCB List Head에 PCB들이 생성될때마다 붙게됨

# Context Switching

- 수행중인 프로세스를 변경할 때 CPU의 레지스터 정보가 변경되는 것
- CPU가 이전의 프로세스 상태를 PCB에 보관하고 또 다른 프로세스 정보를 PCB에 읽어 레지스터에 적재하는 과정
- 인터럽트가 발생, 실행중인 CPU 사용 허가시간을 모두 소모, 입출력을 위해 대기해야하는 경우에 발생

## Context Switching Overhead

- 프로세스 작업 중에는 Overhead를 감수해야하는 상황이 있음
- 프로세스를 수행하다가 입출력 이벤트가 발생해서 대기 상태로 전환시킴 →  이때 CPU를 그냥 놀게 놔두는 것보다 다른 프로세스를 수행시키는 것이 효율적
- CPU가 놀지않도록만들고 사용자에게 빠르게 일처리를 제공해주기 위한것