# 페이징 & 세그먼테이션 (PDF)

페이징과 세그멘테이션 기법은 `메모리 관리 기법` 중 하나다. 

### 메모리 관리 기법, 왜 필요할까?

- 메모리 용량이 증가함에 따라 프로그램 크기 또한 계속 증가하고 있으므로 메모리는 언제나 부족한 상태
- 따라서, 제한된 물리 메모리를 효율적으로 사용할 수 있도록 메모리 관리 전략이 필요함!

### 메모리 관리 기법: `연속 메모리 할당`, `불연속 메모리 할당`

**1) 연속 메모리 관리: 프로세스 하나를 통째로 올리는 것**

- 프로세스를 메모리에 연속적으로 할당하는 기법
- 할당과 제거를 반복하다보면 `Scattered Holes`가 생겨나고 이로 인한 외부 단편화가 발생
- 고정 분할 기법: 메모리가 고정된 파티션으로 분할, 내부 단편화 발생
- 동적 분할 기법: 파티션들이 동적 생성, 자신의 크기와 같은 파티션에 적재, 외부 단편화 발생
    
    (파티션들 사이에 발생)
    

**2) 불연속 메모리 관리: 프로세스를 페이지들로 나눠서 올리는 것**

- 프로그램의 일부가 서로 다른 주소 공간에 할당될 수 있는 기법
- `Page` : 프로세스를 고정된 크기의 작은 블록들로 나눴을 대, 그 블록들을 페이지라 함
- `Frame` : 페이지 크기와 같은 주 기억장치 메모리 블록
- `Segment` : 서로 다른 크기의 논리적 단위
    
![Untitled (91)](https://user-images.githubusercontent.com/71035113/156918969-71002bf7-c763-40d6-880b-11b0c2b8f376.png)
 

**+) 메모리 단편화: 내부 단편화, 외부 단편화**

**메모리 공간이 조각조각 나뉘게 되어 실제로는 사용가능한 메모리가 충분히 존재하지만 할당이 불가능한 상태가 발생하게 된다.**

이를 **메모리 단편화 (Memory Fragmentation)** 라 하고, 내부 단편화와 외부 단편화가 존재한다.

![Untitled (92)](https://user-images.githubusercontent.com/71035113/156918971-e4ea165b-07e4-4225-ac0c-fb0c361da1cf.png)

### 페이징 기법을 쓰는 이유

메모리 단편화 해결 방법으로 제시된게 페이징과 세그멘테이션이다.

### 페이징

![Untitled (93)](https://user-images.githubusercontent.com/71035113/156918972-b2cc9cc9-7cfc-4cc7-ab26-f2f31dfb6f4e.png)

- 프로세스는 페이지로 나누어지고, 물리 메모리는 프레임으로 나뉘어짐
- 각 페이지 번호와 해당 페이지가 할당된 프레임의 시작 물리 주소를 `페이지 테이블`에 저장
- CPU는 논리 주소로 명령을 내리고 이는 각 페이지의 실제 메모리 주소로 매핑되기 위해 페이지 테이블에서 물리 주소로 변경됨
- 가상 메모리 사용

---

### 세그멘테이션

![Untitled (94)](https://user-images.githubusercontent.com/71035113/156918973-13c8fc75-f64d-44e1-aee1-8719c0240fee.png)
 
- 사용자/프로그래머 관점의 메모리 관리 기법
- Segment : 페이지 같은 개념이지만, 프로세스를 **논리적 내용을 기반으로 나눠서** 메모리에 배치
- 프로세스를 `Code`, `Data`, `Stack`으로 나누는 것 역시 세그멘테이션
- 마찬가지로 세그먼트 테이블이 존재하고, 이 테이블은 `세그먼트 번호`와 `시작 주소`(base), `세그먼트 크기`(limit)를 엔트리로 가짐
- CPU에서 해당 세그먼트의 크기를 넘어서는 주소가 들어오면 인터럽트가 발생해서 해당 프로세스를 강제로 종료

## Paging 과 Segmentation 차이

- paging 은 고정 크기를 가짐
- segmentation 은 가변 크기를 가짐 ⇒ 논리적 내용 단위
- paging은 내부 단편화 발생 가능, segmentation 은 외부 단편화 발생 가능

## Paging 과 Segmentation 을 사용하는 이유

- Memory Fragmentation(메모리 단편화) 해결하기 위한 방법
- 다중 프로그래밍 시스템에서 여러 프로세스를 수용하기 위해 주기억장치를 동적 분할하는 메모리 관리 기법이 필요함

### 레퍼런스

- [[OS] 메모리 단편화, 페이징, 세그멘테이션 (velog.io)](https://velog.io/@nnnyeong/OS-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%8B%A8%ED%8E%B8%ED%99%94-%ED%8E%98%EC%9D%B4%EC%A7%95-%EC%84%B8%EA%B7%B8%EB%A9%98%ED%85%8C%EC%9D%B4%EC%85%98)
