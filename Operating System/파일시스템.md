# 파일 시스템

## **파일 시스템(File System)**

컴퓨터에서 파일이나 자료를 쉽게 발견할 수 있도록, 유지 및 관리하는 방법이다.

저장매체에는 수많은 파일이 있기 때문에, 이런 파일들을 관리하는 방법을 말한다.

### **특징**

- 사용자 영역이 아닌 커널 영역에서 동작
- 파일 `CRUD` 기능(읽기, 쓰기, 삭제 등)을 원활히 수행하기 위한 목적
- 계층적 디렉터리 구조를 가짐
- 디스크 파티션 별로 하나씩 둘 수 있음 (???)

### **역할**

- 파일 관리: 파일 저장, 참조, 공유
- 보조 저장소 관리: 저장 공간 할당
- 파일 무결성 메커니즘: 파일이 의도한 정보만 포함하고 있음을 의미
- 접근 방법 제공: 저장된 데이터에 접근할 수 있는 방법 제공

### **개발 목적**

- 하드디스크와 메인 메모리 속도차를 줄이기 위함
- 파일 관리 용이하게 하기 위함
- 하드디스크의 막대한 용량을 효율적으로 이용하기 위함

### **주요 파일 시스템**

Windows : FAT(FAT12/16/32,exFAT), NTFS

Linux : ext(ext2/3/4)

Mac OS : HFS, HFS+

Google : GFS

- GFS : Google File System으로 구글에서 사용하는 분산 파일 시스템

### **구조**

- 메타 영역 : 데이터 영역에 기록된 파일의 이름, 위치, 크기, 시간정보, 삭제유무 등의 파일 정보
- 데이터 영역 : 파일의 데이터

⇒ 윈도우 탐색기를 이용해서 검색할 때 메타 영역을 탐색하면서 파일을 찾는다. 

### 파일 **접근 방법**

1. **순차 접근(Sequential Access)**
    
    > 가장 간단한 접근 방법으로, 대부분 연산은 read와 write
    > 
    

![1](https://user-images.githubusercontent.com/71035113/156919230-bd45464c-6cfc-4ade-a7eb-2a86f905a5fa.jpg)

    현재 위치를 가리키는 포인터에서 시스템 콜이 발생할 경우 포인터를 앞으로 보내면서 read와 write를 진행. 뒤로 돌아갈 땐 지정한 offset만큼 되감기를 해야 한다. (테이프 모델 기반)
    
2. **직접 접근(Direct Access)**
    
    > 특별한 순서없이, 빠르게 레코드를 read, write 가능
    > 
    
![2](https://user-images.githubusercontent.com/71035113/156919231-b3cdefec-390c-4b5a-970d-345fe9d43978.jpg)
  
    현재 위치를 가리키는 cp 변수만 유지하면 직접 접근 파일을 가지고 순차 파일 기능을 쉽게 구현이 가능하다.
    
    무작위 파일 블록에 대한 임의 접근을 허용한다. 따라서 순서의 제약이 없음
    
    대규모 정보를 접근할 때 유용하기 때문에 '데이터베이스'에 활용된다.
    
3. 기타 접근
    
    > 직접 접근 파일에 기반하여 색인(인덱스) 구축
    > 
    
![3](https://user-images.githubusercontent.com/71035113/156919233-8e702cf5-2af2-4834-9879-a951a5731bdd.jpg)
    
    크기가 큰 파일을 입출력 탐색할 수 있게 도와주는 방법임
    

### **디렉터리와 디스크 구조**

---

- **1단계 디렉터리**
    
    > 가장 간단한 구조
    > 
    
    파일들은 서로 유일한 이름을 가짐. 서로 다른 사용자라도 같은 이름 사용 불가
    
![4](https://user-images.githubusercontent.com/71035113/156919234-291eb652-6331-4137-8473-3e2f7bf9a0dc.jpg)
  
- **2단계 디렉터리**
    
    > 사용자에게 개별적인 디렉터리 만들어줌 (사용자 구분)
    > 
    - UFD(user file directory) : 자신만의 사용자 파일 디렉터리
    - MFD(master file directory) : 사용자의 이름과 계정번호로 색인되어 있는 디렉터리
    
![5](https://user-images.githubusercontent.com/71035113/156919235-47d80a92-78e7-4a64-93e2-350e86e40474.jpg)

- **트리 구조 디렉터리**
    
    > 2단계 구조에서 확장된 다단계 트리 구조
    > 
    
    한 비트를 활용하여, 일반 파일(0)인지 디렉터리 파일(1) 구분
    
![6](https://user-images.githubusercontent.com/71035113/156919236-e334d1d8-7618-4e75-909e-4c7ea2828bde.jpg)
 

### **[참고 자료]**

- [링크](https://noep.github.io/2016/02/23/10th-filesystem/)
